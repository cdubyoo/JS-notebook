{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/Users/User/Desktop/jbook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/User/Desktop/jbook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import'./code-cell.css';import{useEffect}from'react';import CodeEditor from'./code-editor';import Preview from'./preview';import Resizable from'./resizable';import{useActions}from'../hooks/use-actions';import{useTypedSelector}from'../hooks/use-typed-selector';import{useCumulativeCode}from'../hooks/use-cumulate-code';var CodeCell=function CodeCell(_ref){var cell=_ref.cell;var _useActions=useActions(),updateCell=_useActions.updateCell,createBundle=_useActions.createBundle;var bundle=useTypedSelector(function(state){return state.bundles[cell.id];});var cumulativeCode=useCumulativeCode(cell.id);useEffect(function(){// if no bundle then create one without setting timer\nif(!bundle){createBundle(cell.id,cumulativeCode);return;}var timer=setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:createBundle(cell.id,cumulativeCode);case 1:case\"end\":return _context.stop();}}},_callee);})),750);return function(){clearTimeout(timer);};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[cumulativeCode,cell.id,createBundle]);return/*#__PURE__*/_jsx(Resizable,{direction:\"vertical\",children:/*#__PURE__*/_jsxs(\"div\",{style:{height:'calc(100% - 10px)',display:'flex',flexDirection:'row'},children:[/*#__PURE__*/_jsx(Resizable,{direction:\"horizontal\",children:/*#__PURE__*/_jsx(CodeEditor,{initialValue:cell.content,onChange:function onChange(value){return updateCell(cell.id,value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-wrapper\",children://ternary expression to check for bundle loading\n!bundle||bundle.loading?/*#__PURE__*/_jsx(\"div\",{className:\"progress-cover\",children:/*#__PURE__*/_jsx(\"progress\",{className:\"progress is-small is-primary\",max:\"100\",children:\"Loading\"})}):/*#__PURE__*/_jsx(Preview,{code:bundle.code,err:bundle.err})})]})});};export default CodeCell;","map":{"version":3,"sources":["C:/Users/User/Desktop/jbook/src/components/code-cell.tsx"],"names":["useEffect","CodeEditor","Preview","Resizable","useActions","useTypedSelector","useCumulativeCode","CodeCell","cell","updateCell","createBundle","bundle","state","bundles","id","cumulativeCode","timer","setTimeout","clearTimeout","height","display","flexDirection","content","value","loading","code","err"],"mappings":"yXAAA,MAAO,iBAAP,CACA,OAASA,SAAT,KAA0B,OAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAEA,OAASC,UAAT,KAA2B,sBAA3B,CACA,OAASC,gBAAT,KAAiC,6BAAjC,CACA,OAASC,iBAAT,KAAkC,4BAAlC,CAMA,GAAMC,CAAAA,QAAiC,CAAG,QAApCA,CAAAA,QAAoC,MAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,iBACfJ,UAAU,EADK,CAC5CK,UAD4C,aAC5CA,UAD4C,CAChCC,YADgC,aAChCA,YADgC,CAEpD,GAAMC,CAAAA,MAAM,CAAGN,gBAAgB,CAAC,SAACO,KAAD,QAAWA,CAAAA,KAAK,CAACC,OAAN,CAAcL,IAAI,CAACM,EAAnB,CAAX,EAAD,CAA/B,CACA,GAAMC,CAAAA,cAAc,CAAGT,iBAAiB,CAACE,IAAI,CAACM,EAAN,CAAxC,CAGAd,SAAS,CAAC,UAAM,CACZ;AACA,GAAI,CAACW,MAAL,CAAa,CACTD,YAAY,CAACF,IAAI,CAACM,EAAN,CAAUC,cAAV,CAAZ,CACA,OACH,CAED,GAAMC,CAAAA,KAAK,CAAGC,UAAU,sEAAC,mIACrBP,YAAY,CAACF,IAAI,CAACM,EAAN,CAAUC,cAAV,CAAZ,CADqB,sDAAD,GAErB,GAFqB,CAAxB,CAIA,MAAO,WAAM,CACTG,YAAY,CAACF,KAAD,CAAZ,CACH,CAFD,CAGA;AACH,CAfQ,CAeN,CAACD,cAAD,CAAiBP,IAAI,CAACM,EAAtB,CAA0BJ,YAA1B,CAfM,CAAT,CAiBA,mBACI,KAAC,SAAD,EAAW,SAAS,CAAC,UAArB,uBACA,aACI,KAAK,CAAE,CACPS,MAAM,CAAE,mBADD,CAEPC,OAAO,CAAE,MAFF,CAGPC,aAAa,CAAE,KAHR,CADX,wBAOI,KAAC,SAAD,EAAW,SAAS,CAAC,YAArB,uBACA,KAAC,UAAD,EACI,YAAY,CAAEb,IAAI,CAACc,OADvB,CAEI,QAAQ,CAAE,kBAACC,KAAD,QAAWd,CAAAA,UAAU,CAACD,IAAI,CAACM,EAAN,CAAUS,KAAV,CAArB,EAFd,EADA,EAPJ,cAaI,YAAK,SAAS,CAAC,kBAAf,UACE;AACE,CAACZ,MAAD,EAAWA,MAAM,CAACa,OAAlB,cACI,YAAK,SAAS,CAAC,gBAAf,uBACI,iBAAU,SAAS,CAAC,8BAApB,CAAmD,GAAG,CAAC,KAAvD,qBADJ,EADJ,cAOI,KAAC,OAAD,EAAS,IAAI,CAAEb,MAAM,CAACc,IAAtB,CAA4B,GAAG,CAAEd,MAAM,CAACe,GAAxC,EATR,EAbJ,GADA,EADJ,CA8BH,CArDD,CAuDA,cAAenB,CAAAA,QAAf","sourcesContent":["import './code-cell.css'\r\nimport { useEffect } from 'react'\r\nimport CodeEditor from './code-editor'\r\nimport Preview from './preview'\r\nimport Resizable from './resizable'\r\nimport { Cell } from '../state'\r\nimport { useActions } from '../hooks/use-actions'\r\nimport { useTypedSelector } from '../hooks/use-typed-selector'\r\nimport { useCumulativeCode } from '../hooks/use-cumulate-code'\r\n\r\ninterface CodeCellProps {\r\n    cell: Cell;\r\n}\r\n\r\nconst CodeCell: React.FC<CodeCellProps> = ({ cell }) => {\r\n    const { updateCell, createBundle } = useActions()\r\n    const bundle = useTypedSelector((state) => state.bundles[cell.id])\r\n    const cumulativeCode = useCumulativeCode(cell.id)\r\n    \r\n\r\n    useEffect(() => {\r\n        // if no bundle then create one without setting timer\r\n        if (!bundle) {\r\n            createBundle(cell.id, cumulativeCode)\r\n            return\r\n        }\r\n\r\n        const timer = setTimeout(async () => {\r\n            createBundle(cell.id, cumulativeCode)\r\n        }, 750)\r\n\r\n        return () => {\r\n            clearTimeout(timer)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [cumulativeCode, cell.id, createBundle])\r\n\r\n    return (\r\n        <Resizable direction=\"vertical\">\r\n        <div\r\n            style={{\r\n            height: 'calc(100% - 10px)',\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            }}\r\n        >\r\n            <Resizable direction=\"horizontal\">\r\n            <CodeEditor\r\n                initialValue={cell.content}\r\n                onChange={(value) => updateCell(cell.id, value)}\r\n            />\r\n            </Resizable>\r\n            <div className=\"progress-wrapper\">\r\n            { //ternary expression to check for bundle loading\r\n                !bundle || bundle.loading ? (\r\n                    <div className=\"progress-cover\">\r\n                        <progress className=\"progress is-small is-primary\" max=\"100\">\r\n                                Loading\r\n                        </progress>\r\n                    </div>\r\n                ) : (\r\n                    <Preview code={bundle.code} err={bundle.err} />\r\n                )}\r\n            </div>\r\n        </div>\r\n        </Resizable>\r\n    )\r\n}\r\n\r\nexport default CodeCell;\r\n"]},"metadata":{},"sourceType":"module"}