{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/jbook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/User/Desktop/jbook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";// override ESBuild to create bundle inside browser\nexport var unpkgPathPlugin=function unpkgPathPlugin(){return{name:'unpkg-path-plugin',setup:function setup(build){// handle root entry file of index.js\nbuild.onResolve({filter:/(^index\\.js$)/},function(){return{path:'index.js',namespace:'a'};});// handle relative paths in a module\nbuild.onResolve({filter:/^\\.+\\//},function(args){return{namespace:'a',path:new URL(args.path,'https://unpkg.com'+args.resolveDir+'/').href};});// on resolve called whenever esbuild tries to find path for a module\n// handle main file of a module\nbuild.onResolve({filter:/.*/},/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(args){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",{namespace:'a',path:\"https://unpkg.com/\".concat(args.path)});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}};};","map":{"version":3,"sources":["C:/Users/User/Desktop/jbook/src/bundler/plugins/unpkg-path-plugin.ts"],"names":["unpkgPathPlugin","name","setup","build","onResolve","filter","path","namespace","args","URL","resolveDir","href"],"mappings":"iSAEA;AACA,MAAO,IAAMA,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CACjC,MAAO,CACHC,IAAI,CAAE,mBADH,CAEHC,KAFG,gBAEGC,KAFH,CAE+B,CAC9B;AACAA,KAAK,CAACC,SAAN,CAAgB,CAAEC,MAAM,CAAE,eAAV,CAAhB,CAA6C,UAAM,CAC/C,MAAO,CAACC,IAAI,CAAC,UAAN,CAAkBC,SAAS,CAAE,GAA7B,CAAP,CACH,CAFD,EAGA;AACAJ,KAAK,CAACC,SAAN,CAAgB,CAAEC,MAAM,CAAE,QAAV,CAAhB,CAAsC,SAACG,IAAD,CAAc,CAChD,MAAO,CACHD,SAAS,CAAE,GADR,CAEHD,IAAI,CAAE,GAAIG,CAAAA,GAAJ,CAAQD,IAAI,CAACF,IAAb,CAAmB,oBAAqBE,IAAI,CAACE,UAA1B,CAAuC,GAA1D,EAA+DC,IAFlE,CAAP,CAIH,CALD,EAOA;AACA;AACAR,KAAK,CAACC,SAAN,CAAgB,CAAEC,MAAM,CAAE,IAAV,CAAhB,0FAAkC,iBAAOG,IAAP,kJAEvB,CACHD,SAAS,CAAE,GADR,CAEHD,IAAI,6BAAuBE,IAAI,CAACF,IAA5B,CAFD,CAFuB,wDAAlC,gEAOH,CAxBE,CAAP,CA0BH,CA3BM","sourcesContent":["import * as esbuild from 'esbuild-wasm';\r\n\r\n// override ESBuild to create bundle inside browser\r\nexport const unpkgPathPlugin = () => {\r\n    return {\r\n        name: 'unpkg-path-plugin',\r\n        setup(build: esbuild.PluginBuild) {\r\n            // handle root entry file of index.js\r\n            build.onResolve({ filter: /(^index\\.js$)/ }, () => {\r\n                return {path:'index.js', namespace: 'a' }\r\n            })\r\n            // handle relative paths in a module\r\n            build.onResolve({ filter: /^\\.+\\// }, (args:any) => {\r\n                return {\r\n                    namespace: 'a',\r\n                    path: new URL(args.path, 'https://unpkg.com'+ args.resolveDir + '/').href\r\n                }\r\n            })\r\n\r\n            // on resolve called whenever esbuild tries to find path for a module\r\n            // handle main file of a module\r\n            build.onResolve({ filter: /.*/ }, async (args: any) => {\r\n                // generate url using path\r\n                return {\r\n                    namespace: 'a',\r\n                    path: `https://unpkg.com/${args.path}`\r\n                }\r\n            });\r\n        },\r\n    };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}